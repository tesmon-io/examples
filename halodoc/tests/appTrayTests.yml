taskActions:
  - id: apptray
    type: httpClient
    value:
      method: GET
      path: /v1/configs/apptray
      baseUrl: https://customers.api.halodoc.com
      headers:
        Authorization: "Bearer ${{variables.apiToken}}"
        User-Agent: "HD customer app/13.120/android 9"
        Accept-Language: "in"
        Connection: "Keep-Alive"
        X-APP-TOKEN: "${{variables.xAppToken}}"

scripts:
  - id: validateHttpOk
    value: |-
      def validateHttpOk(context):
        output = context["last_output"]
        assert output["statusCode"] == 200

tests:
  - id: halodocTest
    name: get halodoc apptray
    tasks:
      - id: gethalodoc
        type: httpClient
        action: taskActions.apptray
        validate: scripts.validateHttpOk
